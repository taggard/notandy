* Recode socket and core, socket should have a loop, core should be event based
